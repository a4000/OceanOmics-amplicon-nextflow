manifest {
    author = 'Adam Bennett'
    name = 'OceanOmics-Amplicon-Nextflow' 
    description = 'This is the nextflow version of the OceanOmics amplicon pipeline using Docker containers'
    mainScript = 'main.nf'
    version = '0.0.1'
}

// Set to false if you don't want the resume option to be the default
resume = true

// The parameters for the pipeline
// These can be set at the command line, or set here in the config file
params {
    ////////////////////////////////////////////////////////////
    // Mandatory parameters
    ////////////////////////////////////////////////////////////

    skip_demux = true
    skip_lulu = false
    publish_dir_mode = "symlink" // Different publishing mode options can be viewed at https://www.nextflow.io/docs/latest/process.html#publishdir
    publish_dir_mode_final = "move" // This is the publishing mode of the final process
    project_id = "ABV4"
    assay = "16S,MiFish" // Please separate multiple assays with commas
    sequencing_run_id = "" // Can be left as an empty string
    cores = 50 // The max number of cores used will be 'cores' * number of assays
    metadata_file = "ABV4_metadata.csv" // 'Sample ID' should be the first column
    indices_file = "ABV4_indices.csv" // must contain 'assay' column and all samples
    dada_option = "FALSE" // dada_option can be "TRUE", "FALSE", or "pseudo"
    database_option = "nt" // database_option can be nt, or custom
    path_to_db = "/data/tools/databases/ncbi-nt/nt"


    ////////////////////////////////////////////////////////////
    // Mandatory parameters if using the --skip_demux option
    ////////////////////////////////////////////////////////////

    demux_dir = "demux_files" // The directory containing the demultiplexed files (with extensions _${assay}.[12].fq.gz)


    ////////////////////////////////////////////////////////////
    // Mandatory files if not using the --skip_demux option
    ////////////////////////////////////////////////////////////

    // These files should be in the same directory as main.nf and nextflow.config
    // These files can be the actual files or symbolic links

    // - Fw index file with the name "${project_id}_${assay}_Fw.fa" (e.g., ABV4_16S_Fw.fa)
    // - Rv index file with the name "${project_id}_${assay}_Rv.fa" (e.g., ABV4_16S_Rv.fa)
    // - Sample rename pattern file with the name "Sample_name_rename_pattern_${project_id}_${assay}.txt" (e.g., Sample_name_rename_pattern_ABV4_16S.txt)
    // - Raw data R1 with the name "*${assay}*R1*fastq.gz" (e.g., AbrolhosV4_MiFish_Fish16S_S1_R1_001.fastq.gz)
    // - Raw data R2 with the name "*${assay}*R2*fastq.gz" (e.g., AbrolhosV4_MiFish_Fish16S_S1_R2_001.fastq.gz)


}

process.container = 'sebrauschert/amplicon_pipeline:v0.2'

docker {
    enabled = true
    runOptions = '-v $PWD:/mnt/scratch -u \$(id -u $USER):\$(id -g $USER)'
}