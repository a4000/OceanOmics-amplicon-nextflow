manifest {
    author = 'Adam Bennett'
    name = 'OceanOmics-Amplicon-Nextflow' 
    description = 'This is the nextflow version of the OceanOmics amplicon pipeline using Docker containers'
    mainScript = 'main.nf'
    version = '0.0.1'
}

// Set to false if you don't want the resume option to be the default
resume = true

// The parameters for the pipeline
// These can be set at the command line, or set here in the config file
params {
    // You can skip the demultiplex step and/or the LULU step
    skip_demux = true
    skip_lulu = true

    // Use publish_dir_mode to define how nextflow publishes the results of the pipeline
    // Different options can be viewed at https://www.nextflow.io/docs/latest/process.html#publishdir
    publish_dir_mode = "symlink"


    ////////////////////////////////////////////////////////////
    // Mandatory if using the --skip_demux option
    ////////////////////////////////////////////////////////////

    demux_dir = "/home/abennett/data/sandbox/adam/nextflow_test/demux_files" // The directory containing the demultiplexed files (with extensions .fq.gz)


    ////////////////////////////////////////////////////////////
    // Mandatory if not using the --skip_demux option
    ////////////////////////////////////////////////////////////

    Fw_index = "/home/abennett/data/sandbox/adam/nextflow_test/ABV4_16S_Fw.fa"
    Rv_index = "/home/abennett/data/sandbox/adam/nextflow_test/ABV4_16S_Rv.fa"
    sample_rename_pattern = "/home/abennett/data/sandbox/adam/nextflow_test/Sample_name_rename_pattern_ABV4_16S.txt"
    raw_data.R1 = "/home/abennett/data/raw_data/OceanOmics/amplicon/210815_VH00640_4_AAAH3HHHV_AB21/AbrolhosV4_MiFish_Fish16S_S1_R1_001.fastq.gz"
    raw_data.R2 = "/home/abennett/data/raw_data/OceanOmics/amplicon/210815_VH00640_4_AAAH3HHHV_AB21/AbrolhosV4_MiFish_Fish16S_S1_R2_001.fastq.gz"


    ////////////////////////////////////////////////////////////
    // Mandatory if using or not using the --skip_demux option
    ////////////////////////////////////////////////////////////

    project_id = "ABV4"
    assay = "16S,MiFish" // Please separate multiple assays with commas
    sequencing_run_id = "210815_VH00640_4_AAAH3HHHV"
    cores = 50 // The max number of cores used will be 'cores' * number of assays
    metadata_file = "/home/abennett/data/sandbox/adam/nextflow_test/ABV4_metadata.csv"
    indices_file = "ABV4_indices.csv"
    dada_option = "FALSE" // dada_option can be "TRUE", "FALSE", or "pseudo"
    database_option = "nt" // database_option can be nt, or custom
    path_to_db = "/home/abennett/data/tools/databases/ncbi-nt/nt"
}

process.container = 'sebrauschert/amplicon_pipeline:v0.2'

docker {
    enabled = true
    runOptions = '-v $PWD:/mnt/scratch -u \$(id -u $USER):\$(id -g $USER)'
}